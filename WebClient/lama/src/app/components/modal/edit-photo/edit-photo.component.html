<div class="tile is-ancestor">
  <div #defaultMode class="tile is-parent photo-container">
    <div class="edit-container">
      <div *ngIf="isMemeMode; then memeMode else defaultMode"></div>

      <ng-template #memeMode>
        <div class="memeArea">
          <img src="{{ imageToEditBase64 }}" alt="image">
          <div *ngIf="!memeSaved">
            <textarea [(ngModel)]="upText" rows="2" class="upTextArea" [appMemeColor]="colorPicker"
              maxlength="55"></textarea>
            <textarea [(ngModel)]="downText" rows="2" class="downTextArea" [appMemeColor]="colorPicker"
              maxlength="55"></textarea>
          </div>
        </div>
      </ng-template>

      <ng-template #defaultMode>
        <image-cropper #editor [imageBase64]="imageToEditBase64" [cropperMinWidth]="cropperMinWidth"
          [cropperMinHeight]="cropperMinHeight" [maintainAspectRatio]="false" format="jpeg"
          (imageCropped)="imageCroppedHandler($event)">
        </image-cropper>
      </ng-template>
    </div>
  </div>

  <!--right panel-->
  <div class="right-panel tile is-4 is-vertical is-parent">
    <!--edit image option-->
    <div class="tile is-child">
      <!--crop-->
      <details>
        <summary (click)="disableMeme()">Crop</summary>
        <div class="drop-content">
          <table>
            <tr>
              <td>Width:</td>
              <td> {{ croppedImageHeight }} px</td>
            </tr>
            <tr>
              <td>Height:</td>
              <td> {{ croppedImageWidth }} px</td>
            </tr>
          </table>
        </div>
      </details>
      <!--rotate-->
      <details>
        <summary (click)="disableMeme()">Rotate</summary>
        <div class="drop-content">
          <div class="columns">
            <div class="column has-text-centered">
              <button class="button is-primary" (click)="rotateLeftHandler()">
                <i class="material-icons is-block">rotate_left</i>
              </button>
            </div>

            <div class="column has-text-centered">
              <button class="button is-primary" (click)="rotateRightHandler()">
                <i class="material-icons is-block">rotate_right</i>
              </button>
            </div>
          </div>
        </div>
      </details>
      <!--flip-->
      <details>
        <summary (click)="disableMeme()">Flip</summary>
        <div class="drop-content">
          <div class="columns">
            <div class="column has-text-centered">
              <button class="button is-primary" (click)="flipHorizontalHandler()">
                <i class="material-icons is-block">border_vertical</i>
              </button>
            </div>
            <div class="column has-text-centered">
              <button class="button is-primary" (click)="flipVerticalHandler()">
                <i class="material-icons is-block">border_horizontal</i>
              </button>
            </div>
          </div>
        </div>
      </details>
      <details>
        <summary (click)="enableMeme()">Meme</summary>
        <div class="drop-content">
          <div class="columns">
            <div class="column has-text-centered">
              <input type="color" [(ngModel)]="colorPicker">
            </div>
          </div>
        </div>
      </details>
    </div>
    <!--save/cancel-->
    <div class="tile is-child is-no-flex">
      <div class="action-buttons">
        <!--save-->
        <a class="tooltip button is-success" (click)="saveClickHandler()">
          <i class="material-icons is-block">done</i>
          <span class="tooltiptext">Save changes</span>
        </a>
        <!--cancel-->
        <a class="tooltip button is-danger" (click)="cancelClickHandler()">
          <i class="material-icons is-block">cancel</i>
          <span class="tooltiptext">Cancel changes</span>
        </a>
        <a class="tooltip button is-info" (click)="resetClickHandler()">
          <i class="material-icons is-block">undo</i>
          <span class="tooltiptext">Reset to original</span>
        </a>
      </div>
    </div>
  </div>
</div>
